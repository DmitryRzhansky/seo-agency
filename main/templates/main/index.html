{% extends "main/base.html" %}
{% load static %}
{% load static custom_filters %}

{% block title %}Комплексное продвижение бизнеса{% endblock title %}

{% block content %}

    <section class="hero-section" id="hero">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h1 class="display-4 fw-bold mb-3">Комплексное продвижение вашего бизнеса в интернете</h1>
                    <p class="lead mb-4">Помогаем компаниям расти и привлекать больше клиентов с 2016 года. Гарантируем результат и прозрачную отчетность.</p>
                    <a href="#contact" class="btn btn-primary btn-lg px-4">Получить консультацию</a>
                </div>
                <div class="col-lg-6 mt-4 mt-lg-0"> 
                    <img src="https://isakov.work/isakov.webp" class="img-fluid"  alt="Директор компании" width="300" height="300">
                </div>
            </div>
        </div>
    </section>
<br><br>
    <section class="section-padding" id="how-we-work">
        <div class="container">
            <h2 class="text-center section-title">Как мы работаем</h2>
            <div class="row text-center g-4">
                <div class="col-md-3">
                    <div class="p-3">
                        <div class="fs-1 text-primary mb-3"><i class="fas fa-search"></i></div>
                        <h5 class="fw-bold">1. Анализ</h5>
                        <p class="text-muted">Глубоко погружаемся в ваш бизнес, анализируем конкурентов и целевую аудиторию.</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="p-3">
                        <div class="fs-1 text-primary mb-3"><i class="fas fa-bullseye"></i></div>
                        <h5 class="fw-bold">2. Стратегия</h5>
                        <p class="text-muted">Разрабатываем индивидуальную стратегию продвижения для достижения ваших целей.</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="p-3">
                        <div class="fs-1 text-primary mb-3"><i class="fas fa-cogs"></i></div>
                        <h5 class="fw-bold">3. Реализация</h5>
                        <p class="text-muted">Проводим техническую оптимизацию, работаем с контентом и ссылочным профилем.</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="p-3">
                         <div class="fs-1 text-primary mb-3"><i class="fas fa-chart-line"></i></div>
                        <h5 class="fw-bold">4. Результат</h5>
                        <p class="text-muted">Отслеживаем динамику, корректируем стратегию и предоставляем прозрачные отчеты.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
<br><br>
    
    <section class="section-padding bg-light" id="top-services">
        <div class="container">
            <h2 class="text-center section-title">Топ услуг маркетинга</h2>
            
            {% comment %} 
            !!! ВАЖНО !!!
            Мы договаривались добавить иконки. Здесь я заменил статический код на динамический, 
            используя переменную top_services из views.py.
            Если нужно отображать карусель, как было раньше, мы можем ее восстановить,
            но пока используем простой ряд карточек для простоты.
            
            Поскольку в модели Service нет поля для иконки, я временно использую статичную иконку,
            пока мы не добавим ее в модель.
            
            Вам нужно убедиться, что в админке добавлены 6+ услуг, чтобы они отобразились.
            {% endcomment %}
            
            <div class="row justify-content-center g-4">
                {% for service in top_services %}
                <div class="col-md-4 col-lg-2">
                    <a href="{% url 'services:service_detail' slug=service.slug %}" class="card text-center p-3 h-100 text-decoration-none text-dark shadow-sm">
                        <div class="fs-3 text-primary mb-2"><i class="fas fa-bolt"></i></div> 
                        <h6 class="card-title fw-bold mb-0">{{ service.title }}</h6>
                    </a>
                </div>
                {% empty %}
                 <div class="col-12 text-center py-3">
                    <p class="text-muted">Услуги пока не добавлены в административной панели.</p>
                </div>
                {% endfor %}
            </div>
            
        </div>
    </section>
<br><br>

<section class="section-padding" id="niches">
    <div class="container">
        <h2 class="text-center section-title">Экспертиза в 80+ нишах</h2>
        
        {% with initial_niches="Цветы, Ювелирные изделия, Продукты, Часы, Аптеки, Косметика, Бытовая техника, Книги, Скейтборды, Гинекология, Свадебные агентства, Салоны красоты" %}
        {% with hidden_niches="Онлайн-школы, Ремонт квартир, Входные двери, Клининг, Event-агентства, Велосипеды, Бурение скважин, Бизнес тренеры, Автошколы, Ветеринарные клиники, Шинные центры, ВУЗы, Грузоперевозки, Деревянные дома, Детская обувь, Детская одежда, Доставка еды, Зоомагазины, Издательства, Кулинария, Кейтеринг, Косметология, Квесты, Кадровые агентства, Логопед, Канцтовары, Ландшафтный дизайн, Металлоконструкции, Натяжные потолки, Мотоциклы, Нефтяные компании, Нижнее белье, Обувь, Окна, Ателье, Подарки, Керамическая плитка, Ремонт компьютеров, Сантехника, Студии звукозаписи, Страховые компании, Ткани и текстиль, Кондитерские изделия, Спецодежда, Фотографы, Фотостудии, Химчистка, Церкви, Школы танцев, Электромонтаж, Хостелы, Элитная недвижимость, Гостиницы" %}

        <div class="row g-2 justify-content-center niche-grid">
            {% for niche in initial_niches|split:", " %}
            <div class="col-auto">
                <span class="badge rounded-pill bg-light text-dark border p-2 shadow-sm">{{ niche }}</span>
            </div>
            {% endfor %}
        </div>
        
        <div class="collapse" id="allNiches">
            <div class="row g-2 justify-content-center niche-grid mt-3">
                {% for niche in hidden_niches|split:", " %}
                <div class="col-auto">
                    <span class="badge rounded-pill bg-light text-dark border p-2 shadow-sm">{{ niche }}</span>
                </div>
                {% endfor %}
            </div>
        </div>
        
        {% endwith %}
        {% endwith %}

        <div class="text-center mt-4">
            <button class="btn btn-outline-primary" type="button" data-bs-toggle="collapse" data-bs-target="#allNiches" aria-expanded="false" aria-controls="allNiches">
                Посмотреть все ниши
            </button>
        </div>
    </div>
</section>

<br><br>

<section class="section-padding bg-light" id="locations">
    <div class="container">
        <h2 class="section-title text-center">Работаем по всей России и СНГ</h2>
        
        <div class="row justify-content-center text-center mt-4">
            
            {% comment %} 
            Цикл по списку, переданному из views.py
            {% endcomment %}
            {% for city in cities_list %}
            <div class="col-6 col-sm-4 col-md-3 col-lg-2 mb-3">
                <span class="badge bg-primary text-white p-2 w-100">{{ city }}</span>
            </div>
            {% endfor %}

        </div>
        <p class="text-center small text-muted mt-4">И множество других регионов.</p>
    </div>
</section>

</section>
<br><br>

    <section class="section-padding" id="tariffs">
        <div class="container">
            <h2 class="text-center section-title">Инвестируйте в рост</h2>
            <div class="row g-4">
                <div class="col-lg-4">
                    <div class="card h-100 price-card p-4 text-center">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title text-muted">Базовый</h5>
                            <p class="card-text display-5 fw-bold my-3">от 50 000 ₽</p>
                            <ul class="list-unstyled text-start mb-4">
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Комплексный SEO-аудит сайта</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Технические оптимизации (до 100 стр.)</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Базовая оптимизация мета-тегов</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Семантическое ядро (до 500 запросов)</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Базовая внутренняя перелинковка</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Оптимизация текстов (до 10 стр.)</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Ежемесячный отчет о позициях</li>
                            </ul>
                            <a href="#contact" class="btn btn-outline-primary mt-auto">Выбрать тариф</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="card h-100 price-card p-4 text-center border-primary">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title text-primary">Продвинутый</h5>
                            <p class="card-text display-5 fw-bold my-3">от 100 000 ₽</p>
                            <ul class="list-unstyled text-start mb-4">
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Все услуги базового тарифа</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Расширенный технический аудит</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Глубокая оптимизация (до 300 стр.)</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Семантическое ядро (до 2000 запросов)</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Продвинутая внутренняя перелинковка</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Создание SEO-текстов (до 5/мес.)</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Базовая работа с внешними ссылками</li>
                            </ul>
                            <a href="#contact" class="btn btn-primary mt-auto">Выбрать тариф</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="card h-100 price-card p-4 text-center">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title text-muted">Премиум</h5>
                            <p class="card-text display-5 fw-bold my-3">от 200 000 ₽</p>
                            <ul class="list-unstyled text-start mb-4">
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Все услуги продвинутого тарифа</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Комплексная стратегия SEO</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Неограниченная оптимизация страниц</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Семантическое ядро (3000+ запросов)</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Продвинутая работа с ссылками</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Локальное SEO</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Еженедельные консультации</li>
                            </ul>
                            <a href="#contact" class="btn btn-outline-primary mt-auto">Выбрать тариф</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
<br><br>

    <section class="section-padding bg-light" id="team">
        <div class="container">
            <h2 class="text-center section-title">Наша команда</h2>
            <div class="row g-4 justify-content-center">
                {% for member in team_members %}
                <div class="col-12 col-sm-6 col-lg-4">
                    <div class="card h-100 text-center shadow-sm p-4">
                        {% if member.photo %}
                        <img src="{{ member.photo.url }}" class="rounded-circle mb-3 team-member" alt="{{ member.get_photo_alt }}" width="100" height="100" style="object-fit: cover;">
                        {% else %}
                        <img src="https://placehold.co/100x100/EFEFEF/333?text=Фото" class="rounded-circle mb-3 team-member" alt="{{ member.name }}">
                        {% endif %}
                        <h5 class="fw-bold">{{ member.name }}</h5>
                        <p class="text-muted">{{ member.role }}</p>
                        {% if member.bio %}<p class="fst-italic">{{ member.bio }}</p>{% endif %}
                    </div>
                </div>
                {% empty %}
                <div class="col-12 text-center"><p class="text-muted">Добавьте членов команды в админке, чтобы показать здесь.</p></div>
                {% endfor %}
            </div>
        </div>
    </section>

    <hr class="my-5"> 
<br><br>

    <section class="section-padding" id="reviews">
        <div class="container">
            <h2 class="text-center section-title">Нам доверяют бизнесы со всей России</h2>
            <div class="row g-4 justify-content-center">
                {% for t in testimonials %}
                <div class="col-12 col-md-6">
                    <div class="card h-100 shadow-sm p-4 text-center">
                        {% if t.photo %}
                        <img src="{{ t.photo.url }}" class="rounded-circle mb-3 review-author" alt="{{ t.get_photo_alt }}" width="80" height="80" style="object-fit: cover;">
                        {% else %}
                        <img src="https://placehold.co/80x80/EFEFEF/333?text=Фото" class="rounded-circle mb-3 review-author" alt="{{ t.author_name }}">
                        {% endif %}
                        <p class="lead fst-italic">{{ t.content }}</p>
                        <h6 class="fw-bold mt-3">{{ t.author_name }}</h6>
                        {% if t.author_title %}<p class="text-muted">{{ t.author_title }}</p>{% endif %}
                    </div>
                </div>
                {% empty %}
                <div class="col-12 text-center"><p class="text-muted">Добавьте отзывы в админке, чтобы показать здесь.</p></div>
                {% endfor %}
            </div>
        </div>
    </section>
<br><br>

    <section class="section-padding bg-light" id="contact">
        <div class="container">
            <h2 class="section-title text-center">Оставьте заявку</h2>
            <p class="lead text-center mb-5">Получите индивидуальный план продвижения, бесплатно!</p>
            
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    
                    <form method="post" action="{% url 'main:home' %}" class="p-4 p-md-5 rounded bg-white shadow-lg">
                        {% csrf_token %} 
                        
                        <div class="row g-3">
                            <div class="col-md-6">
                                {{ form.name.label_tag }}
                                {{ form.name }}
                                {% if form.name.errors %}<small class="text-danger">{{ form.name.errors }}</small>{% endif %}
                            </div>
                            <div class="col-md-6">
                                {{ form.phone.label_tag }}
                                {{ form.phone }}
                                {% if form.phone.errors %}<small class="text-danger">{{ form.phone.errors }}</small>{% endif %}
                            </div>
                            
                            <div class="col-12">
                                {{ form.email.label_tag }}
                                {{ form.email }}
                                {% if form.email.errors %}<small class="text-danger">{{ form.email.errors }}</small>{% endif %}
                            </div>
                            
                            <div class="col-12">
                                {{ form.message.label_tag }}
                                {{ form.message }}
                                {% if form.message.errors %}<small class="text-danger">{{ form.message.errors }}</small>{% endif %}
                            </div>
                            
                            <div class="col-12">
                                <button type="submit" class="btn btn-primary btn-lg w-100 mt-3">Отправить заявку</button>
                            </div>
                            
                            <div class="col-12 text-center mt-4">
                                <p class="small text-muted">Нажимая "Отправить заявку", вы соглашаетесь с <a href="#">Политикой конфиденциальности</a>.</p>
                            </div>
                        </div>
                        
                    </form>
                </div>
            </div>
        </div>
    </section>
<br><br>

{% endblock content %}