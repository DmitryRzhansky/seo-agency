{% extends 'main/base.html' %}
{% load static %}
{% load seo_tags %}

{% block title %}{{ title }}{% endblock %}


{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/sitemap-brutal.css' %}">
{% endblock extra_css %}

{% block content %}

<!-- Hero —Å–µ–∫—Ü–∏—è –∫–∞—Ä—Ç—ã —Å–∞–π—Ç–∞ - –±—Ä—É—Ç–∞–ª—å–Ω–∞—è -->
<section class="brutal-sitemap-hero">
    <div class="brutal-container">
        <div class="brutal-sitemap-hero-content">
            <h1 class="brutal-sitemap-hero-title">–ö–∞—Ä—Ç–∞ —Å–∞–π—Ç–∞</h1>
            <p class="brutal-sitemap-hero-subtitle">–ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∞–π—Ç–∞ Isakov Agency. –ù–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –±—ã—Å—Ç—Ä–æ –∏ —É–¥–æ–±–Ω–æ.</p>
        </div>
    </div>
</section>

<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç - –±—Ä—É—Ç–∞–ª—å–Ω—ã–π -->
<section class="brutal-sitemap-content">
    <div class="brutal-container">
        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="brutal-sitemap-stats">
            <h3 class="brutal-sitemap-stats-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∞–π—Ç–∞</h3>
            <div class="brutal-sitemap-stats-grid">
                <div class="brutal-sitemap-stat-item">
                    <span class="brutal-sitemap-stat-number">{{ sitemap_data.all_services|length }}</span>
                    <span class="brutal-sitemap-stat-label">–£—Å–ª—É–≥</span>
                </div>
                <div class="brutal-sitemap-stat-item">
                    <span class="brutal-sitemap-stat-number">{{ sitemap_data.blog_posts|length }}</span>
                    <span class="brutal-sitemap-stat-label">–°—Ç–∞—Ç–µ–π –≤ –±–ª–æ–≥–µ</span>
                </div>
                <div class="brutal-sitemap-stat-item">
                    <span class="brutal-sitemap-stat-number">{{ sitemap_data.cities|length }}</span>
                    <span class="brutal-sitemap-stat-label">–ì–æ—Ä–æ–¥–æ–≤</span>
                </div>
                <div class="brutal-sitemap-stat-item">
                    <span class="brutal-sitemap-stat-number">{{ sitemap_data.total_faq_count }}</span>
                    <span class="brutal-sitemap-stat-label">–û—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã</span>
                </div>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –≤ —Å–µ—Ç–∫–µ -->
        <div class="brutal-sitemap-grid">
            <!-- –£—Å–ª—É–≥–∏ -->
            <div class="brutal-sitemap-section">
                <h3 class="brutal-sitemap-section-title">üíº –£—Å–ª—É–≥–∏</h3>
                {% for category in sitemap_data.services %}
                <div class="brutal-sitemap-category">
                    <h4 class="brutal-sitemap-category-title">
                        <a href="{{ category.get_absolute_url }}">{{ category.title }}</a>
                    </h4>
                    <ul class="brutal-sitemap-list">
                        {% for service in category.services.all %}
                        <li>
                            <a href="{{ service.get_absolute_url }}">{{ service.title }}</a>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                {% endfor %}
            </div>

            <!-- –ë–ª–æ–≥ -->
            <div class="brutal-sitemap-section">
                <h3 class="brutal-sitemap-section-title">üìù –ë–ª–æ–≥</h3>
                {% for category in sitemap_data.blog_categories %}
                <div class="brutal-sitemap-category">
                    <h4 class="brutal-sitemap-category-title">
                        <a href="{% url 'blog:category_posts' category.slug %}">{{ category.name }}</a> ({{ category.post_set.count }} —Å—Ç–∞—Ç–µ–π)
                    </h4>
                    <ul class="brutal-sitemap-list">
                        {% for post in category.post_set.all|slice:":5" %}
                        <li>
                            <a href="{{ post.get_absolute_url }}">{{ post.title }}</a>
                        </li>
                        {% endfor %}
                        {% if category.post_set.count > 5 %}
                        <li>
                            <a href="{% url 'blog:category_posts' category.slug %}">... –∏ –µ—â–µ {{ category.post_set.count|add:"-5" }} —Å—Ç–∞—Ç–µ–π</a>
                        </li>
                        {% endif %}
                    </ul>
                </div>
                {% endfor %}
            </div>

            <!-- –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
            <div class="brutal-sitemap-section">
                <h3 class="brutal-sitemap-section-title">üèôÔ∏è –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h3>
                <ul class="brutal-sitemap-list">
                    {% for city in sitemap_data.cities %}
                    <li>
                        <a href="{{ city.get_absolute_url }}">SEO {{ city.get_name_prepositional }}</a>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <!-- FAQ -->
        <div class="brutal-sitemap-section">
            <h3 class="brutal-sitemap-section-title">‚ùì FAQ</h3>
            <div class="brutal-sitemap-sections-grid">
                {% for category in sitemap_data.faq_categories %}
                <div class="brutal-sitemap-section-item">
                    <h4 class="brutal-sitemap-category-title">
                        <a href="{% url 'main:faq_category' category.slug %}">{{ category.name }}</a>
                    </h4>
                    <ul class="brutal-sitemap-list">
                        {% for item in category.faq_items.all|slice:":5" %}
                        <li>
                            <a href="{% url 'main:faq_item' category.slug item.slug %}">{{ item.question|truncatechars:60 }}</a>
                        </li>
                        {% endfor %}
                        {% if category.faq_items.count > 5 %}
                        <li>
                            <a href="{% url 'main:faq_category' category.slug %}">... –∏ –µ—â–µ {{ category.faq_items.count|add:"-5" }} –≤–æ–ø—Ä–æ—Å–æ–≤</a>
                        </li>
                        {% endif %}
                    </ul>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</section>

{% endblock content %}
