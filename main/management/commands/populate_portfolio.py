from django.core.management.base import BaseCommand
from main.models import PortfolioItem


class Command(BaseCommand):
    help = 'Создает примеры работ для портфолио'

    def handle(self, *args, **options):
        # Создаем примеры работ
        portfolio_items = [
            {
                'title': 'SEO-продвижение интернет-магазина электроники',
                'slug': 'seo-promotion-electronics-store',
                'short_description': 'Комплексное SEO-продвижение интернет-магазина электроники. Увеличение органического трафика на 300% за 6 месяцев.',
                'full_description': '''
                    <h3>Задача проекта</h3>
                    <p>Клиент обратился с проблемой низкого органического трафика и плохих позиций в поисковой выдаче. Интернет-магазин электроники работал уже 2 года, но не получал достаточного количества заказов через поисковые системы.</p>
                    
                    <h3>Проведенная работа</h3>
                    <ul>
                        <li>Технический аудит сайта и исправление ошибок</li>
                        <li>Оптимизация структуры сайта и навигации</li>
                        <li>Создание уникального контента для категорий товаров</li>
                        <li>Настройка внутренней перелинковки</li>
                        <li>Работа с внешними ссылками</li>
                        <li>Оптимизация страниц товаров</li>
                    </ul>
                    
                    <h3>Результаты</h3>
                    <p>За 6 месяцев работы удалось достичь значительных результатов в продвижении сайта.</p>
                ''',
                'client_name': 'ТехноМир',
                'project_type': 'seo',
                'results': [
                    {
                        'metric': 'Органический трафик',
                        'value': '+300%',
                        'description': 'Увеличение органического трафика за 6 месяцев'
                    },
                    {
                        'metric': 'Позиции в ТОП-10',
                        'value': '45 запросов',
                        'description': 'Количество запросов в ТОП-10 поисковой выдачи'
                    },
                    {
                        'metric': 'Конверсия',
                        'value': '+150%',
                        'description': 'Рост конверсии в заказы'
                    }
                ],
                'technologies': ['Google Analytics', 'Google Search Console', 'Яндекс.Метрика', 'Screaming Frog', 'Ahrefs'],
                'is_featured': True,
                'order': 1
            },
            {
                'title': 'Настройка контекстной рекламы для стоматологии',
                'slug': 'context-ads-dentistry',
                'short_description': 'Настройка и ведение контекстной рекламы для стоматологической клиники. Снижение стоимости клика на 40%.',
                'full_description': '''
                    <h3>Задача проекта</h3>
                    <p>Стоматологическая клиника нуждалась в привлечении новых пациентов через интернет. Требовалось настроить эффективную рекламную кампанию с контролем бюджета.</p>
                    
                    <h3>Проведенная работа</h3>
                    <ul>
                        <li>Анализ конкурентов и целевой аудитории</li>
                        <li>Создание рекламных объявлений</li>
                        <li>Настройка кампаний в Яндекс.Директ и Google Ads</li>
                        <li>Оптимизация посадочных страниц</li>
                        <li>Настройка отслеживания конверсий</li>
                        <li>Еженедельная оптимизация кампаний</li>
                    </ul>
                    
                    <h3>Результаты</h3>
                    <p>Удалось значительно улучшить показатели рекламных кампаний и привлечь качественный трафик.</p>
                ''',
                'client_name': 'Стоматология "Белые зубы"',
                'project_type': 'context',
                'results': [
                    {
                        'metric': 'Стоимость клика',
                        'value': '-40%',
                        'description': 'Снижение стоимости клика за 3 месяца'
                    },
                    {
                        'metric': 'CTR',
                        'value': '8.5%',
                        'description': 'Показатель кликабельности объявлений'
                    },
                    {
                        'metric': 'Конверсия',
                        'value': '12%',
                        'description': 'Процент посетителей, ставших пациентами'
                    }
                ],
                'technologies': ['Яндекс.Директ', 'Google Ads', 'Яндекс.Метрика', 'Google Analytics'],
                'is_featured': True,
                'order': 2
            },
            {
                'title': 'Комплексное продвижение сайта мебельной фабрики',
                'slug': 'complex-promotion-furniture-factory',
                'short_description': 'Комплексное продвижение сайта мебельной фабрики: SEO + контекстная реклама + SMM. Рост продаж на 250%.',
                'full_description': '''
                    <h3>Задача проекта</h3>
                    <p>Мебельная фабрика хотела увеличить продажи через интернет. Требовался комплексный подход к продвижению с использованием всех доступных каналов.</p>
                    
                    <h3>Проведенная работа</h3>
                    <ul>
                        <li>SEO-оптимизация сайта</li>
                        <li>Настройка контекстной рекламы</li>
                        <li>Ведение социальных сетей</li>
                        <li>Создание контент-плана</li>
                        <li>Настройка email-маркетинга</li>
                        <li>Работа с отзывами и репутацией</li>
                    </ul>
                    
                    <h3>Результаты</h3>
                    <p>Комплексный подход позволил достичь выдающихся результатов по всем направлениям.</p>
                ''',
                'client_name': 'Мебельная фабрика "Комфорт"',
                'project_type': 'complex',
                'results': [
                    {
                        'metric': 'Продажи',
                        'value': '+250%',
                        'description': 'Рост продаж за год'
                    },
                    {
                        'metric': 'Органический трафик',
                        'value': '+400%',
                        'description': 'Увеличение органического трафика'
                    },
                    {
                        'metric': 'Подписчики в соцсетях',
                        'value': '+500%',
                        'description': 'Рост аудитории в социальных сетях'
                    }
                ],
                'technologies': ['SEO', 'Яндекс.Директ', 'Google Ads', 'VK', 'Instagram', 'Email-маркетинг'],
                'is_featured': True,
                'order': 3
            },
            {
                'title': 'SMM для ресторана быстрого питания',
                'slug': 'smm-fast-food-restaurant',
                'short_description': 'Ведение социальных сетей для сети ресторанов быстрого питания. Рост вовлеченности на 300%.',
                'full_description': '''
                    <h3>Задача проекта</h3>
                    <p>Сеть ресторанов быстрого питания хотела увеличить узнаваемость бренда и привлечь больше клиентов через социальные сети.</p>
                    
                    <h3>Проведенная работа</h3>
                    <ul>
                        <li>Создание контент-стратегии</li>
                        <li>Ведение Instagram и VK</li>
                        <li>Создание визуального контента</li>
                        <li>Проведение конкурсов и акций</li>
                        <li>Работа с инфлюенсерами</li>
                        <li>Настройка таргетированной рекламы</li>
                    </ul>
                    
                    <h3>Результаты</h3>
                    <p>Активная работа в социальных сетях принесла отличные результаты.</p>
                ''',
                'client_name': 'Ресторан "Быстро и вкусно"',
                'project_type': 'smm',
                'results': [
                    {
                        'metric': 'Вовлеченность',
                        'value': '+300%',
                        'description': 'Рост вовлеченности в соцсетях'
                    },
                    {
                        'metric': 'Подписчики',
                        'value': '+200%',
                        'description': 'Рост количества подписчиков'
                    },
                    {
                        'metric': 'Охват',
                        'value': '+400%',
                        'description': 'Увеличение охвата публикаций'
                    }
                ],
                'technologies': ['Instagram', 'VK', 'Facebook', 'Canva', 'Tilda'],
                'is_featured': False,
                'order': 4
            },
            {
                'title': 'Разработка корпоративного сайта для IT-компании',
                'slug': 'website-development-it-company',
                'short_description': 'Создание современного корпоративного сайта для IT-компании с системой управления контентом.',
                'full_description': '''
                    <h3>Задача проекта</h3>
                    <p>IT-компания нуждалась в современном корпоративном сайте, который бы отражал профессионализм компании и привлекал новых клиентов.</p>
                    
                    <h3>Проведенная работа</h3>
                    <ul>
                        <li>Создание дизайн-концепции</li>
                        <li>Разработка адаптивного сайта</li>
                        <li>Интеграция с CRM-системой</li>
                        <li>Настройка аналитики</li>
                        <li>Оптимизация для поисковых систем</li>
                        <li>Обучение персонала работе с CMS</li>
                    </ul>
                    
                    <h3>Результаты</h3>
                    <p>Современный сайт стал эффективным инструментом для привлечения клиентов.</p>
                ''',
                'client_name': 'IT-компания "ТехноСофт"',
                'project_type': 'development',
                'results': [
                    {
                        'metric': 'Скорость загрузки',
                        'value': '1.2 сек',
                        'description': 'Время загрузки главной страницы'
                    },
                    {
                        'metric': 'Мобильная версия',
                        'value': '100%',
                        'description': 'Адаптивность под все устройства'
                    },
                    {
                        'metric': 'SEO-готовность',
                        'value': '95/100',
                        'description': 'Оценка SEO-оптимизации'
                    }
                ],
                'technologies': ['Django', 'Bootstrap', 'JavaScript', 'PostgreSQL', 'Nginx'],
                'is_featured': False,
                'order': 5
            }
        ]

        created_count = 0
        for item_data in portfolio_items:
            portfolio_item, created = PortfolioItem.objects.get_or_create(
                slug=item_data['slug'],
                defaults=item_data
            )
            if created:
                created_count += 1
                self.stdout.write(
                    self.style.SUCCESS(f'✅ Создана работа: {portfolio_item.title}')
                )
            else:
                self.stdout.write(
                    self.style.WARNING(f'⚠️ Работа уже существует: {portfolio_item.title}')
                )

        self.stdout.write(
            self.style.SUCCESS(f'🎉 Создано {created_count} новых работ в портфолио!')
        )
