{% extends 'main/base.html' %}
{% load static %}

{% block title %}{{ title }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/sitemap.css' %}">
{% endblock extra_css %}

{% block content %}

<!-- Hero —Å–µ–∫—Ü–∏—è -->
<section class="hero-section inner-hero">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h1 class="display-4 fw-bold mb-4">–ö–∞—Ä—Ç–∞ —Å–∞–π—Ç–∞</h1>
                <p class="lead mb-4">–ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∞–π—Ç–∞ Isakov Agency. –ù–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –±—ã—Å—Ç—Ä–æ –∏ —É–¥–æ–±–Ω–æ.</p>
            </div>
            <div class="col-lg-4 mt-4 mt-lg-0 d-flex justify-content-center align-items-center">
                <i class="fas fa-sitemap fa-10x text-primary sitemap-hero-icon"></i>
            </div>
        </div>
    </div>
</section>

<div class="container my-5">
    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="sitemap-stats">
        <h4 class="text-center mb-4">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∞–π—Ç–∞</h4>
        <div class="row">
            <div class="col-md-4">
                <span class="stat-number">{{ sitemap_data.services|length }}</span>
                <span class="stat-label">–£—Å–ª—É–≥–∏</span>
            </div>
            <div class="col-md-4">
                <span class="stat-number">{{ sitemap_data.blog_posts|length }}</span>
                <span class="stat-label">–°—Ç–∞—Ç–µ–π –≤ –±–ª–æ–≥–µ</span>
            </div>
            <div class="col-md-4">
                <span class="stat-number">{{ sitemap_data.cities|length }}</span>
                <span class="stat-label">–ì–æ—Ä–æ–¥–æ–≤</span>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
        <div class="col-lg-6">
            <div class="sitemap-section">
                <h3>üè† –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h3>
                <ul class="sitemap-list">
                    {% for page in sitemap_data.main_pages %}
                    <li>
                        <a href="{{ page.url }}">{{ page.title }}</a>
                        <div class="sitemap-description">{{ page.description }}</div>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <!-- –£—Å–ª—É–≥–∏ -->
        <div class="col-lg-6">
            <div class="sitemap-section">
                <h3>üíº –£—Å–ª—É–≥–∏</h3>
                {% for category in sitemap_data.services %}
                <div class="sitemap-category">
                    <h4><a href="{{ category.get_absolute_url }}">{{ category.title }}</a></h4>
                    <ul class="sitemap-list">
                        {% for service in category.services.all %}
                        <li>
                            <a href="{{ service.get_absolute_url }}">{{ service.title }}</a>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <div class="row">
        <!-- –ë–ª–æ–≥ -->
        <div class="col-lg-6">
            <div class="sitemap-section">
                <h3>üìù –ë–ª–æ–≥</h3>
                {% for category in sitemap_data.blog_categories %}
                <div class="sitemap-category">
                    <h4><a href="{% url 'blog:category_posts' category.slug %}">{{ category.name }}</a> ({{ category.post_set.count }} —Å—Ç–∞—Ç–µ–π)</h4>
                    <ul class="sitemap-list">
                        {% for post in category.post_set.all|slice:":5" %}
                        <li>
                            <a href="{{ post.get_absolute_url }}">{{ post.title }}</a>
                        </li>
                        {% endfor %}
                        {% if category.post_set.count > 5 %}
                        <li>
                            <a href="{% url 'blog:category_posts' category.slug %}">... –∏ –µ—â–µ {{ category.post_set.count|add:"-5" }} —Å—Ç–∞—Ç–µ–π</a>
                        </li>
                        {% endif %}
                    </ul>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
        <div class="col-lg-6">
            <div class="sitemap-section">
                <h3>üèôÔ∏è –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h3>
                <ul class="sitemap-list">
                    {% for city in sitemap_data.cities %}
                    <li>
                        <a href="{{ city.get_absolute_url }}">SEO {{ city.get_name_prepositional }}</a>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>

    <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
    {% if sitemap_data.pages %}
    <div class="row">
        <div class="col-12">
            <div class="sitemap-section">
                <h3>üìÑ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h3>
                <ul class="sitemap-list">
                    {% for page in sitemap_data.pages %}
                    <li>
                        <a href="{{ page.get_absolute_url }}">{{ page.title }}</a>
                        {% if page.short_description %}
                        <div class="sitemap-description">{{ page.short_description }}</div>
                        {% endif %}
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏ -->
    <div class="row">
        <div class="col-12">
            <div class="sitemap-section">
                <h3>üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏</h3>
                <div class="row">
                    <div class="col-md-6">
                        <ul class="sitemap-list">
                        <li><a href="/#contact">–°–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏</a></li>
                        <li><a href="/#services">–ù–∞—à–∏ —É—Å–ª—É–≥–∏</a></li>
                        <li><a href="/#portfolio">–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ</a></li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <ul class="sitemap-list">
                            <li><a href="/privacy/">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a></li>
                            <li><a href="/sitemap.xml">XML Sitemap</a></li>
                            <li><a href="/robots.txt">Robots.txt</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
