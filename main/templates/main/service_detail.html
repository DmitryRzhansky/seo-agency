{% extends "main/base.html" %}
{% load static %}
{% load seo_tags %}
{% load custom_filters %}

{% block seo_meta %}
    {% if seo_object %}
        {% seo_meta_tags seo_object title "Комплексное продвижение бизнеса | Isakov Agency" %}
    {% else %}
        <title>{{ service.title }} | Isakov Agency</title>
        <meta name="description" content="{% block description %}Комплексное продвижение бизнеса в интернете. SEO, контекстная реклама, создание сайтов.{% endblock description %}">
    {% endif %}
{% endblock seo_meta %}


{% block breadcrumbs %}
<div class="breadcrumbs">
    <div class="container">
        <a href="{% url 'main:home' %}">Главная</a><span class="separator">/</span><a href="{% url 'services:service_list' %}">Услуги</a><span class="separator">/</span><a href="{% url 'services:service_category' slug=service.category.slug %}">{{ service.category.title }}</a><span class="separator">/</span><span class="current">{{ service.title }}</span>
    </div>
</div>
{% endblock breadcrumbs %}


{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/service-detail-brutal.css' %}">
<link rel="stylesheet" href="{% static 'css/breadcrumbs-brutal.css' %}">
<link rel="stylesheet" href="{% static 'css/share-buttons-brutal.css' %}">
{% endblock extra_css %}

{% block content %}

<!-- Hero секция детальной страницы -->
<section class="service-detail-hero">
    <div class="container">
        <div class="service-detail-hero-content">
            <h1 class="service-detail-title">{{ service.title }}</h1>
        </div>
    </div>
</section>

<!-- Основной контент -->
<section class="service-detail-content">
    <div class="container">
        <div class="service-detail-wrapper">
            <!-- Блоки контента -->
            <div class="content-blocks">
                <div class="content-block main">
                    <div class="block-number">01</div>
                    <h2>Описание услуги</h2>
                    <p>{{ service.short_description }}</p>
                </div>
                
                <div class="content-block">
                    <div class="block-number">02</div>
                    <h3>Что включает услуга</h3>
                    <ul>
                        <li>Комплексный анализ вашего проекта</li>
                        <li>Разработка индивидуальной стратегии</li>
                        <li>Техническая оптимизация сайта</li>
                        <li>Создание качественного контента</li>
                        <li>Построение ссылочной массы</li>
                        <li>Еженедельная отчетность о результатах</li>
                    </ul>
                </div>
                
                <div class="content-block">
                    <div class="block-number">03</div>
                    <h3>Сроки выполнения</h3>
                    <p>Первые результаты видны уже через 2-3 месяца, полное продвижение занимает 6-12 месяцев в зависимости от сложности проекта. Мы работаем поэтапно и предоставляем отчеты о прогрессе.</p>
                </div>
                
                <div class="content-block content">
                    <div class="block-number">04</div>
                    <h3>Подробная информация</h3>
                    <div class="content-text service-scrollable">
                        {{ service.content|safe }}
                    </div>
                </div>
            </div>
            
            <!-- Изображение справа -->
            {% if service.image %}
            <div class="service-image-container">
                <img 
                    src="{{ service.image.url }}" 
                    class="service-image" 
                    alt="{{ service.get_image_alt }}"
                >
                <div class="service-image-overlay">
                    {{ service.category.title }}
                </div>
                <div class="service-image-decoration"></div>
            </div>
            {% endif %}
        </div>
    </div>
</section>

<!-- Блок поделиться -->
<section class="share-section">
    <div class="container">
        <div class="share-block">
            <button class="copy-btn" data-text="{{ service.title }} - {{ service.short_description }} | Isakov Agency - {{ request.build_absolute_uri }}">
                <i class="fas fa-copy"></i>
                Скопировать текст
            </button>
            
            <div class="social-share">
                <span class="social-label">Поделиться:</span>
                <div class="social-links">
                    <a href="#" class="social-link vk" data-url="{{ request.build_absolute_uri }}">
                        <i class="fab fa-vk"></i>
                    </a>
                    <a href="#" class="social-link telegram" data-url="{{ request.build_absolute_uri }}">
                        <i class="fab fa-telegram"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
            
<!-- CTA блок -->
<section class="service-cta">
    <div class="container">
        <div class="service-cta-content">
            <h3 class="service-cta-title">Готовы обсудить вашу задачу?</h3>
            <p class="service-cta-text">Оставьте заявку, и мы бесплатно разработаем индивидуальную стратегию продвижения для вашей компании.</p>
            <a href="{% url 'main:home' %}#contact" class="service-cta-btn">
                Получить консультацию
            </a>
        </div>
    </div>
</section>

<!-- Навигация -->
<section class="service-navigation">
    <div class="container">
        <a href="{% url 'services:service_category' slug=service.category.slug %}" class="service-nav-link">
            ← Вернуться в раздел "{{ service.category.title }}"
        </a>
    </div>
</section>

<!-- Блок "Еще услуги" -->
{% if related_services %}
<section class="related-services">
    <div class="container">
        <h2 class="related-services-title">Еще услуги</h2>
        <div class="related-grid">
            {% for related_service in related_services %}
            <div class="related-card">
                {% if related_service.image %}
                <img src="{{ related_service.image.url }}" class="related-image" alt="{{ related_service.get_image_alt }}">
                {% endif %}
                <div class="related-category">{{ related_service.category.title }}</div>
                <h3 class="related-title">
                    <a href="{{ related_service.get_absolute_url }}" style="color: inherit; text-decoration: none;">
                        {{ related_service.title }}
                    </a>
                </h3>
                <p class="related-description">
                    {{ related_service.short_description|truncatewords:25 }}
                </p>
                <a href="{{ related_service.get_absolute_url }}" class="related-link">
                    Подробнее
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

{% block extra_js %}
<script src="{% static 'js/share-buttons-brutal.js' %}"></script>
{% endblock extra_js %}

{% endblock content %}
